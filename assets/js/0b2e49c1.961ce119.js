"use strict";(self.webpackChunkcubic_wiki=self.webpackChunkcubic_wiki||[]).push([["50088"],{86140:function(n,e,i){i.r(e),i.d(e,{metadata:()=>l,default:()=>o,frontMatter:()=>t,contentTitle:()=>r,toc:()=>c,assets:()=>d});var l=JSON.parse('{"id":"process/plugin/more/plugin-build/github-actions-build","title":"\u4F7F\u7528 GitHub Actions","description":"\u4EC0\u4E48\u662F GitHub Actions\uFF1F","source":"@site/docs-java/process/plugin/more/plugin-build/github-actions-build.md","sourceDirName":"process/plugin/more/plugin-build","slug":"/process/plugin/more/plugin-build/github-actions-build","permalink":"/NitWikit/java/process/plugin/more/plugin-build/github-actions-build","draft":false,"unlisted":false,"editUrl":"https://github.com/Cubic-Project/NitWikit/tree/main/docs-java/process/plugin/more/plugin-build/github-actions-build.md","tags":[],"version":"current","lastUpdatedBy":"Dreeam","lastUpdatedAt":1765689082000,"sidebarPosition":6,"frontMatter":{"title":"\u4F7F\u7528 GitHub Actions","sidebar_position":6},"sidebar":"tutorialSidebar","previous":{"title":"\u4F7F\u7528\u7EC8\u7AEF","permalink":"/NitWikit/java/process/plugin/more/plugin-build/terminal-build"},"next":{"title":"\u989C\u8272\u4EE3\u7801","permalink":"/NitWikit/java/process/plugin/more/color-message"}}'),s=i(47259),a=i(45739);let t={title:"\u4F7F\u7528 GitHub Actions",sidebar_position:6},r="\u4F7F\u7528 GitHub Actions",d={},c=[{value:"\u4EC0\u4E48\u662F GitHub Actions\uFF1F",id:"\u4EC0\u4E48\u662F-github-actions",level:2},{value:"\u914D\u7F6E\u6B65\u9AA4",id:"\u914D\u7F6E\u6B65\u9AA4",level:2},{value:"1. \u521B\u5EFA\u5DE5\u4F5C\u6D41\u6587\u4EF6",id:"1-\u521B\u5EFA\u5DE5\u4F5C\u6D41\u6587\u4EF6",level:3},{value:"Maven \u9879\u76EE\u6A21\u677F",id:"maven-\u9879\u76EE\u6A21\u677F",level:4},{value:"Gradle \u9879\u76EE\u6A21\u677F",id:"gradle-\u9879\u76EE\u6A21\u677F",level:4},{value:"2. \u914D\u7F6E\u8BF4\u660E",id:"2-\u914D\u7F6E\u8BF4\u660E",level:3},{value:"\u4F7F\u7528\u65B9\u6CD5",id:"\u4F7F\u7528\u65B9\u6CD5",level:2},{value:"1. \u81EA\u52A8\u6784\u5EFA",id:"1-\u81EA\u52A8\u6784\u5EFA",level:3},{value:"2. \u53D1\u5E03\u65B0\u7248\u672C",id:"2-\u53D1\u5E03\u65B0\u7248\u672C",level:3},{value:"3. \u4E0B\u8F7D\u6784\u5EFA\u7ED3\u679C",id:"3-\u4E0B\u8F7D\u6784\u5EFA\u7ED3\u679C",level:3},{value:"\u8FDB\u9636\u914D\u7F6E",id:"\u8FDB\u9636\u914D\u7F6E",level:2},{value:"1. \u7F13\u5B58\u4F9D\u8D56",id:"1-\u7F13\u5B58\u4F9D\u8D56",level:3},{value:"2. \u591A\u7248\u672C\u6D4B\u8BD5",id:"2-\u591A\u7248\u672C\u6D4B\u8BD5",level:3},{value:"3. \u81EA\u52A8\u66F4\u65B0\u4F9D\u8D56",id:"3-\u81EA\u52A8\u66F4\u65B0\u4F9D\u8D56",level:3},{value:"\u5E38\u89C1\u95EE\u9898",id:"\u5E38\u89C1\u95EE\u9898",level:2},{value:"1. \u6784\u5EFA\u5931\u8D25",id:"1-\u6784\u5EFA\u5931\u8D25",level:3},{value:"2. \u6587\u4EF6\u672A\u4E0A\u4F20",id:"2-\u6587\u4EF6\u672A\u4E0A\u4F20",level:3},{value:"3. \u6743\u9650\u95EE\u9898",id:"3-\u6743\u9650\u95EE\u9898",level:3}];function u(n){let e={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.header,{children:(0,s.jsx)(e.h1,{id:"\u4F7F\u7528-github-actions",children:"\u4F7F\u7528 GitHub Actions"})}),"\n",(0,s.jsx)(e.h2,{id:"\u4EC0\u4E48\u662F-github-actions",children:"\u4EC0\u4E48\u662F GitHub Actions\uFF1F"}),"\n",(0,s.jsx)(e.p,{children:"GitHub Actions \u662F GitHub \u63D0\u4F9B\u7684\u81EA\u52A8\u5316\u5DE5\u5177\uFF0C\u53EF\u4EE5\u81EA\u52A8\u6267\u884C\u6784\u5EFA\u3001\u6D4B\u8BD5\u548C\u90E8\u7F72\u7B49\u4EFB\u52A1\u3002\u4F7F\u7528\u5B83\u53EF\u4EE5\u8BA9\u4F60\u7684\u63D2\u4EF6\u5728\u6BCF\u6B21\u4EE3\u7801\u66F4\u65B0\u65F6\u81EA\u52A8\u6784\u5EFA\u3002"}),"\n",(0,s.jsx)(e.h2,{id:"\u914D\u7F6E\u6B65\u9AA4",children:"\u914D\u7F6E\u6B65\u9AA4"}),"\n",(0,s.jsx)(e.h3,{id:"1-\u521B\u5EFA\u5DE5\u4F5C\u6D41\u6587\u4EF6",children:"1. \u521B\u5EFA\u5DE5\u4F5C\u6D41\u6587\u4EF6"}),"\n",(0,s.jsxs)(e.p,{children:["\u5728\u9879\u76EE\u6839\u76EE\u5F55\u521B\u5EFA ",(0,s.jsx)(e.code,{children:".github/workflows/build.yml"})," \u6587\u4EF6\uFF1A"]}),"\n",(0,s.jsx)(e.h4,{id:"maven-\u9879\u76EE\u6A21\u677F",children:"Maven \u9879\u76EE\u6A21\u677F"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-yaml",children:'name: Build Plugin\n\non:\n    push:\n        branches: [main]\n    pull_request:\n        branches: [main]\n    release:\n        types: [created]\n\njobs:\n    build:\n        runs-on: ubuntu-latest\n\n        steps:\n            - uses: actions/checkout@v4\n\n            - name: Set up JDK\n              uses: actions/setup-java@v4\n              with:\n                  java-version: "8"\n                  distribution: "adopt"\n\n            - name: Build with Maven\n              run: mvn -B package\n\n            - name: Upload artifact\n              uses: actions/upload-artifact@v4\n              with:\n                  name: Plugin\n                  path: target/*.jar\n\n            - name: Upload to release\n              if: github.event_name == \'release\'\n              uses: softprops/action-gh-release@v2\n              with:\n                  files: target/*.jar\n'})}),"\n",(0,s.jsx)(e.h4,{id:"gradle-\u9879\u76EE\u6A21\u677F",children:"Gradle \u9879\u76EE\u6A21\u677F"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-yaml",children:'name: Build Plugin\n\non:\n    push:\n        branches: [main]\n    pull_request:\n        branches: [main]\n    release:\n        types: [created]\n\njobs:\n    build:\n        runs-on: ubuntu-latest\n\n        steps:\n            - uses: actions/checkout@v4\n\n            - name: Set up JDK\n              uses: actions/setup-java@v4\n              with:\n                  java-version: "8"\n                  distribution: "adopt"\n\n            - name: Build with Gradle\n              run: |\n                  chmod +x gradlew\n                  ./gradlew build\n\n            - name: Upload artifact\n              uses: actions/upload-artifact@v4\n              with:\n                  name: Plugin\n                  path: build/libs/*.jar\n\n            - name: Upload to release\n              if: github.event_name == \'release\'\n              uses: softprops/action-gh-release@v2\n              with:\n                  files: build/libs/*.jar\n'})}),"\n",(0,s.jsx)(e.h3,{id:"2-\u914D\u7F6E\u8BF4\u660E",children:"2. \u914D\u7F6E\u8BF4\u660E"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"\u89E6\u53D1\u6761\u4EF6"}),"\uFF1A"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-yaml",children:"on:\n    push:\n        branches: [main] # \u63A8\u9001\u5230 main \u5206\u652F\u65F6\u89E6\u53D1\n    pull_request:\n        branches: [main] # PR \u5230 main \u5206\u652F\u65F6\u89E6\u53D1\n    release:\n        types: [created] # \u521B\u5EFA\u65B0\u7248\u672C\u65F6\u89E6\u53D1\n"})}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"\u6784\u5EFA\u73AF\u5883"}),"\uFF1A"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-yaml",children:"runs-on: ubuntu-latest # \u4F7F\u7528\u6700\u65B0\u7684 Ubuntu \u7CFB\u7EDF\n"})}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Java \u914D\u7F6E"}),"\uFF1A"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-yaml",children:'- name: Set up JDK\n  uses: actions/setup-java@v2\n  with:\n      java-version: "8" # \u4F7F\u7528 Java 8\n      distribution: "adopt" # \u4F7F\u7528 AdoptOpenJDK\n'})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"\u4F7F\u7528\u65B9\u6CD5",children:"\u4F7F\u7528\u65B9\u6CD5"}),"\n",(0,s.jsx)(e.h3,{id:"1-\u81EA\u52A8\u6784\u5EFA",children:"1. \u81EA\u52A8\u6784\u5EFA"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u6BCF\u6B21\u63A8\u9001\u4EE3\u7801\u5230 main \u5206\u652F\u65F6\u81EA\u52A8\u6784\u5EFA"}),"\n",(0,s.jsx)(e.li,{children:"\u6BCF\u6B21\u521B\u5EFA Pull Request \u65F6\u81EA\u52A8\u6784\u5EFA"}),"\n",(0,s.jsx)(e.li,{children:"\u6784\u5EFA\u7ED3\u679C\u53EF\u5728 Actions \u9875\u9762\u67E5\u770B"}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"2-\u53D1\u5E03\u65B0\u7248\u672C",children:"2. \u53D1\u5E03\u65B0\u7248\u672C"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:'\u5728 GitHub \u4E0A\u70B9\u51FB"Create release"'}),"\n",(0,s.jsx)(e.li,{children:"\u586B\u5199\u7248\u672C\u53F7\u548C\u8BF4\u660E"}),"\n",(0,s.jsx)(e.li,{children:"\u53D1\u5E03\u540E\u81EA\u52A8\u6784\u5EFA\u5E76\u9644\u52A0\u5230\u53D1\u5E03\u9875\u9762"}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"3-\u4E0B\u8F7D\u6784\u5EFA\u7ED3\u679C",children:"3. \u4E0B\u8F7D\u6784\u5EFA\u7ED3\u679C"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:"\u8FDB\u5165 Actions \u9875\u9762"}),"\n",(0,s.jsx)(e.li,{children:"\u9009\u62E9\u6700\u65B0\u7684\u6784\u5EFA"}),"\n",(0,s.jsx)(e.li,{children:"\u5728 Artifacts \u4E2D\u4E0B\u8F7D jar \u6587\u4EF6"}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"\u8FDB\u9636\u914D\u7F6E",children:"\u8FDB\u9636\u914D\u7F6E"}),"\n",(0,s.jsx)(e.h3,{id:"1-\u7F13\u5B58\u4F9D\u8D56",children:"1. \u7F13\u5B58\u4F9D\u8D56"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-yaml",children:"- name: Cache Maven packages\n  uses: actions/cache@v2\n  with:\n      path: ~/.m2\n      key: ${{ runner.os }}-m2-${{ hashFiles('**/pom.xml') }}\n"})}),"\n",(0,s.jsx)(e.h3,{id:"2-\u591A\u7248\u672C\u6D4B\u8BD5",children:"2. \u591A\u7248\u672C\u6D4B\u8BD5"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-yaml",children:'strategy:\n    matrix:\n        java: ["8", "11", "16"]\nsteps:\n    - uses: actions/setup-java@v2\n      with:\n          java-version: ${{ matrix.java }}\n'})}),"\n",(0,s.jsx)(e.h3,{id:"3-\u81EA\u52A8\u66F4\u65B0\u4F9D\u8D56",children:"3. \u81EA\u52A8\u66F4\u65B0\u4F9D\u8D56"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-yaml",children:"- name: Update dependencies\n  uses: renovatebot/renovate@v24\n  with:\n      token: ${{ secrets.GITHUB_TOKEN }}\n"})}),"\n",(0,s.jsx)(e.h2,{id:"\u5E38\u89C1\u95EE\u9898",children:"\u5E38\u89C1\u95EE\u9898"}),"\n",(0,s.jsx)(e.h3,{id:"1-\u6784\u5EFA\u5931\u8D25",children:"1. \u6784\u5EFA\u5931\u8D25"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:"\u68C0\u67E5 Actions \u65E5\u5FD7"}),"\n",(0,s.jsx)(e.li,{children:"\u786E\u8BA4 JDK \u7248\u672C\u6B63\u786E"}),"\n",(0,s.jsx)(e.li,{children:"\u9A8C\u8BC1\u6240\u6709\u4F9D\u8D56\u53EF\u8BBF\u95EE"}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"2-\u6587\u4EF6\u672A\u4E0A\u4F20",children:"2. \u6587\u4EF6\u672A\u4E0A\u4F20"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:"\u68C0\u67E5\u6587\u4EF6\u8DEF\u5F84\u662F\u5426\u6B63\u786E"}),"\n",(0,s.jsx)(e.li,{children:"\u786E\u8BA4\u6784\u5EFA\u4EA7\u7269\u5B58\u5728"}),"\n",(0,s.jsx)(e.li,{children:"\u9A8C\u8BC1\u4E0A\u4F20\u6B65\u9AA4\u914D\u7F6E"}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"3-\u6743\u9650\u95EE\u9898",children:"3. \u6743\u9650\u95EE\u9898"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:"\u68C0\u67E5\u4ED3\u5E93\u8BBE\u7F6E"}),"\n",(0,s.jsx)(e.li,{children:"\u786E\u8BA4 Token \u6743\u9650"}),"\n",(0,s.jsx)(e.li,{children:"\u9A8C\u8BC1\u5DE5\u4F5C\u6D41\u6743\u9650"}),"\n"]})]})}function o(n={}){let{wrapper:e}={...(0,a.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(u,{...n})}):u(n)}},45739:function(n,e,i){i.d(e,{R:()=>t,x:()=>r});var l=i(96363);let s={},a=l.createContext(s);function t(n){let e=l.useContext(a);return l.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function r(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:t(n.components),l.createElement(a.Provider,{value:e},n.children)}}}]);